@using Microsoft.AspNetCore.Identity
@using POS.Domain.Entities

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

<aside class="w-64 h-screen bg-white border-r border-gray-200 flex flex-col justify-between">
    <div>
        <!-- Menú principal -->
        <nav class="flex flex-col gap-2 mt-4 px-4 text-gray-700">
            @if (SignInManager.IsSignedIn(User))
            {
                var currentUser = await UserManager.GetUserAsync(User);
                var userRoles = await UserManager.GetRolesAsync(currentUser!);
                var mainRole = userRoles.FirstOrDefault() ?? "Usuario";

                <!-- Dashboard -->
                <a href="@Url.Action("Index", "Home")" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors">
                    <i data-lucide="home" class="w-5 h-5"></i>
                    <span>Dashboard</span>
                </a>

                <!-- Productos -->
                <a href="@Url.Action("ListProduct", "Product")" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors">
                    <i data-lucide="package" class="w-5 h-5"></i>
                    <span>Productos</span>
                </a>

                <!-- Pedidos -->
                <a href="@Url.Action("Index", "Pedido")" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors">
                    <i data-lucide="shopping-cart" class="w-5 h-5"></i>
                    <span>Pedidos</span>
                </a>

                <!-- Clientes (solo visible si es Admin o Vendedor) -->
                @if (mainRole == "Admin" || mainRole == "Vendedor")
                {
                    <a href="@Url.Action("ListClient", "Cliet")" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors">
                        <i data-lucide="users" class="w-5 h-5"></i>
                        <span>Clientes</span>
                    </a>
                }

                <!-- Inventario (solo Admin) -->
                @if (mainRole == "Admin")
                {
                    <a href="@Url.Action("Index", "Inventario")" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors">
                        <i data-lucide="archive" class="w-5 h-5"></i>
                        <span>Inventario</span>
                    </a>
                }
            }
            else
            {
                <!-- Usuario NO autenticado -->
                <p class="text-gray-400 text-sm px-3">Inicie sesión para acceder al panel</p>
            }
        </nav>
    </div>

   
</aside>
